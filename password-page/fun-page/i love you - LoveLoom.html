<!DOCTYPE html>
<!-- saved from url=(0043)https://love.tsonit.com/happy-birthday-ogek -->
<html lang="en" style="--vh: 7.03px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>i love you  - LoveLoom</title>
    <meta name="description" content="i love you ">
    <meta property="og:title" content="i love you  - LoveLoom">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://love.tsonit.com/love.jpg">
    <meta property="og:url" content="https://love.tsonit.com/happy-birthday-ogek">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="icon" type="image/png" href="https://love.tsonit.com/ico_logo.png" sizes="16x16">
    <link rel="stylesheet" href="./i love you - LoveLoom_files/style.css">
    <link rel="stylesheet" href="./i love you - LoveLoom_files/all.min.css">
    <!-- Google tag (gtag.js) -->
    <script async="" src="./i love you - LoveLoom_files/js"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-C01QH0Y269');
    </script>
    <style>
        .text-white {
            color: white !important;
        }

        .btn-audio-toggle {
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        .music-status {
            display: flex;
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            z-index: 9999;
            align-items: center;
            font-family: sans-serif;
            font-size: 14px;
        }

        .music-status .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #a259f7;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        body.portrait-mode #landscape-warning {
            display: flex;
            opacity: 1;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.152.2/build/three.module.js",
        "three/addons/controls/OrbitControls.js": "https://unpkg.com/three@0.152.2/examples/jsm/controls/OrbitControls.js",
        "three/examples/jsm/loaders/FontLoader.js": "https://unpkg.com/three@0.152.2/examples/jsm/loaders/FontLoader.js",
        "three/examples/jsm/geometries/TextGeometry.js": "https://unpkg.com/three@0.152.2/examples/jsm/geometries/TextGeometry.js"
      }
    }
    </script>
</head>

<body>

    <div id="container" style="height: 703px;"><canvas data-engine="three.js r152" width="958" height="878" style="display: block; width: 767px; height: 703px; touch-action: none;"></canvas></div>
    <div id="music-loader" class="music-status" style="display: none;">
        <div class="spinner"></div>
        <span>Loading data...</span>
    </div>

    <div id="landscape-warning">
        <div class="warning-content">
            <div class="rotate-icon"></div>
            <h1>LoveLoom</h1>
            <h1>Galaxy of Love</h1>
            <p style="font-size: 0.6em;">Please rotate your screen to landscape to see the magic!</p>
            <p style="font-size: 0.6em;">Remember to touch the planet in the center to open the secret gift.</p>
            <p style="font-size: 1.4em;">love.tsonit.com</p>
            <div class="stars-bg"></div>
        </div>
    </div>
    <div id="dark-overlay"></div>
    <div id="info">

    </div>
            
        <script>
            window.dataLove2Loveloom = {"template":"galaxy","data":{"keychain":{"name":"Loveloom","phone":"Loveloom","address":"Loveloom"},"ringTexts":["i love you "],"heartImages":["https:\/\/loveloomw.nguyenthanhsont123.workers.dev\/view\/0:AgACAgUAAyEGAASkDbQmAAECo9toubFCckPWphh_GKJIvkwlZXfEHQACNcUxG_uWyFXW-1j7AljLGQEAAwIAA3gAAzYE.jpg","https:\/\/loveloom.click\/view\/3:AgACAgUAAyEGAASsk8AHAAECPQZoubE_czakUSqnJwyIfMGfNUPKhgACqNAxG5dz0VWBlQpp2ax51gEAAwIAA3gAAzYE.jpg","https:\/\/loveloom.click\/view\/1:AgACAgUAAyEGAASiN5Z0AAECS1ZowWtrvFTvwEnCXFgW7OPVJV_R4wACwM4xGx_qCFaNdiVz_uB3PgEAAwIAA3cAAzYE.jpg","https:\/\/ll5ts.ll5.workers.dev\/view\/1:AgACAgUAAyEGAASoB-yCAAEBC9ZowWtnCGzEQRTwhkUTapHRT8hw5QACaMExG8GDEVYpmhANK1IDcAEAAwIAA3cAAzYE.jpg","https:\/\/ll2.sonlq162.workers.dev\/view\/0:AgACAgUAAyEGAASrDIrAAALpCmjBa2KvTkjuagUPiMj7Ol8_PqyLAAL2xDEbzw8JVsF_T_X_hIA0AQADAgADdwADNgQ.jpg","https:\/\/ll.sonlq211.workers.dev\/view\/0:AgACAgUAAyEGAASkDbQmAAECwB5owWspze-iR0jbI6wJYjDX8LKkygACOsoxG8E9CFbWjw1XHG_EiQEAAwIAA3cAAzYE.jpg","https:\/\/loveloomw.nguyenthanhsont123.workers.dev\/view\/1:AgACAgUAAyEGAAShh5GpAAECRYJowWsm1jhJ7xPcNNqHn3vHDcEh3wACBssxG_0zEFb3cgxgrh1ssAEAAwIAA3kAAzYE.jpg","https:\/\/ll.sonlq211.workers.dev\/view\/0:AgACAgUAAyEGAASkDbQmAAECwC5owW_9ErvfyjyVvdMHayCyJhSpfQACUMoxG8E9CFYsa1m8SwwxKwEAAwIAA3cAAzYE.jpg","https:\/\/ll6.sonlq72118.workers.dev\/view\/2:AgACAgUAAyEGAASpaQQ8AAEBZalowW_kPJmPbKhTL_E9bkz8nKOkWQACo8YxG6V7CVbUmAbfeB-_RQEAAwIAA3kAAzYE.jpg"],"type_music":"zing","music_id":"ZZC68Z0W","backgroundMusic":""},"messages":{"click_to_open":"Touch the planet"}};
        </script>
        <script type="module" src="./i love you - LoveLoom_files/script.js.download"></script>
    <button id="toggle-audio" class="text-white btn-audio-toggle" style="position: absolute; top: 10px; right: 10px; z-index: 999;">
        <i id="audio-icon" class="text-white fa-solid fa-volume-xmark"></i>
    </button>
    <script>
        // --- MODULE QU·∫¢N L√ù √ÇM THANH ---
        const musicManager = {
            // Properties
            audio: null,
            state: 'idle', // idle, loading, ready, playing, paused, muted, error
            tokenData: null,

            // --- Core Functions ---
            _setupAudio() {
                let audioSrc = window.dataLove2Loveloom?.data?.backgroundMusic;
                if (!audioSrc) { // Nh·∫°c d·ª± ph√≤ng cu·ªëi c√πng
                    audioSrc = '/storage/musics/CjfFFwHK4iTik1AjrDa33PT3waZm4Bv1qFreni4e.mp3';
                }
                this.audio = new Audio(audioSrc);
                const isCrossOrigin = /^(https?:)?\/\//.test(audioSrc) && new URL(audioSrc).origin !== window.location.origin;
                if (isCrossOrigin) {
                    this.audio.crossOrigin = "anonymous";
                }
                this.audio.loop = true;
                this.audio.volume = 0.7;
                this.attachEventListeners();
                window.galaxyAudio = this.audio; // G√°n v√†o global ƒë·ªÉ script.js d√πng
                this.updateState('ready'); // B√°o r·∫±ng nh·∫°c ƒë√£ s·∫µn s√†ng ƒë·ªÉ ph√°t
            },

            async init() {
                const musicData = window.dataLove2Loveloom.data;
                this.updateState('loading'); // Lu√¥n b·∫Øt ƒë·∫ßu v·ªõi tr·∫°ng th√°i loading

                if (musicData.type_music === 'system') {
                    this._setupAudio(); // T·∫°o audio ngay l·∫≠p t·ª©c v·ªõi nh·∫°c h·ªá th·ªëng
                } else if (musicData.type_music === 'zing' && musicData.music_id) {
                    try {
                        const res = await this.fetchWithAuth(`/get-song?id=${musicData.music_id}`);
                        if (!res.ok) throw new Error('Response not OK');
                        const songInfo = await res.json();
                        const mp3Url = songInfo.stream?.['128'];

                        if (mp3Url) {
                            window.dataLove2Loveloom.data.backgroundMusic = mp3Url;
                            this._setupAudio(); // T·∫°o audio sau khi l·∫•y link Zing th√†nh c√¥ng
                        } else {
                            console.error('Kh√¥ng t√¨m th·∫•y link MP3 128kbps, d√πng nh·∫°c d·ª± ph√≤ng.');
                            this._setupAudio(); // L·ªói -> D√πng nh·∫°c d·ª± ph√≤ng
                        }
                    } catch (error) {
                        console.error('L·ªói khi l·∫•y nh·∫°c t·ª´ Zing:', error);
                        this.updateState('error');
                        this._setupAudio(); // L·ªói -> D√πng nh·∫°c d·ª± ph√≤ng
                    }
                } else {
                    this._setupAudio(); // Tr∆∞·ªùng h·ª£p m·∫∑c ƒë·ªãnh
                }
            },

            play() {
                // H√†m n√†y gi·ªù ch·ªâ ƒë·ªÉ script.js g·ªçi, ƒë·∫£m b·∫£o nh·∫°c ph√°t khi intro b·∫Øt ƒë·∫ßu
                if (this.audio && this.audio.paused) {
                    // Tr·∫£ v·ªÅ m·ªôt Promise ƒë·ªÉ b√™n ngo√†i c√≥ th·ªÉ x·ª≠ l√Ω l·ªói
                    return this.audio.play();
                }
                // N·∫øu nh·∫°c ƒë√£ ph√°t ho·∫∑c kh√¥ng t·ªìn t·∫°i, tr·∫£ v·ªÅ m·ªôt Promise ƒë√£ ho√†n th√†nh
                return Promise.resolve();
            },

            // H√†m m·ªõi ƒë·ªÉ b·∫≠t/t·∫Øt nh·∫°c t·ª´ n√∫t ƒëi·ªÅu khi·ªÉn
            togglePlayback() {
                if (!this.audio || this.state === 'loading' || this.state === 'error') {
                    console.warn("Nh·∫°c ch∆∞a s·∫µn s√†ng ho·∫∑c ƒëang l·ªói.");
                    return;
                }

                // N·∫øu nh·∫°c ƒëang b·ªã t·∫Øt ti·∫øng, ∆∞u ti√™n b·∫≠t ti·∫øng tr∆∞·ªõc
                if (this.audio.muted) {
                    this.audio.muted = false;
                }

                // Sau ƒë√≥ m·ªõi x·ª≠ l√Ω play/pause
                if (this.audio.paused) {
                    this.audio.play();
                } else {
                    this.audio.pause();
                }
            },


            // --- UI & State Management ---
            updateState(newState) {
                this.state = newState;
                // Ch·ªâ ·∫©n loader khi kh√¥ng c√≤n loading n·ªØa
                if (newState !== 'loading') {
                    const loader = document.getElementById('music-loader');
                    if (loader) loader.style.display = 'none';
                }
                this.updateUI();
            },

            updateUI() {
                const audioIcon = document.getElementById('audio-icon');
                if (!audioIcon) return;

                // C·∫≠p nh·∫≠t icon d·ª±a tr√™n tr·∫°ng th√°i paused
                if (!this.audio || this.audio.paused) {
                    audioIcon.classList.remove("fa-volume-high");
                    audioIcon.classList.add("fa-volume-xmark");
                } else {
                    audioIcon.classList.remove("fa-volume-xmark");
                    audioIcon.classList.add("fa-volume-high");
                }
            },

            attachEventListeners() {
                if (!this.audio) return;
                this.audio.onplay = () => this.updateState('playing');
                this.audio.onpause = () => this.updateState('paused');
                this.audio.onvolumechange = () => this.updateUI(); // C·∫≠p nh·∫≠t UI n·∫øu c√≥ thay ƒë·ªïi volume
            },

            // C√°c h√†m fetchWithAuth v√† getToken gi·ªØ nguy√™n...
            async getToken() {
                try {
                    const res = await fetch('/token-api-mp3');
                    if (!res.ok) throw new Error('Kh√¥ng l·∫•y ƒë∆∞·ª£c token');
                    const data = await res.json();
                    this.tokenData = data;
                    return this.tokenData;
                } catch (err) {
                    console.error('L·ªói l·∫•y token:', err);
                    return null;
                }
            },
            async fetchWithAuth(url) {
                await this.getToken();

                if (!this.tokenData) throw new Error('Kh√¥ng c√≥ token x√°c th·ª±c');

                const headers = {
                    'X-Auth-Token': this.tokenData.token,
                    'X-Auth-Timestamp': this.tokenData.timestamp,
                    'X-Client-Key': this.tokenData.clientKey,
                    'X-Auth-Nonce': this.tokenData.nonce,
                };

                let res = await fetch(url, {
                    headers
                });

                if (!res.ok) {
                    const errorText = await res.text();
                    console.error(`L·ªói response (${res.status}):`, errorText);
                    if (res.status === 403) {
                        await this.getToken();
                        if (!this.tokenData) throw new Error('Kh√¥ng c√≥ token x√°c th·ª±c');

                        const newHeaders = {
                            'X-Auth-Token': this.tokenData.token,
                            'X-Auth-Timestamp': this.tokenData.timestamp,
                            'X-Client-Key': this.tokenData.clientKey,
                            'X-Auth-Nonce': this.tokenData.nonce,
                        };

                        res = await fetch(url, {
                            headers: newHeaders
                        });

                        if (!res.ok) {
                            const errText = await res.text();
                            throw new Error(`Request l·ªói sau khi refresh token: ${res.status}`);
                        }
                    } else {
                        throw new Error(`Request l·ªói: ${res.status}`);
                    }
                }

                return res;
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            window.musicManager = musicManager;
            musicManager.init();

            const toggleBtn = document.getElementById("toggle-audio");
            toggleBtn.addEventListener("click", () => musicManager.togglePlayback());
        });

        // let tokenData = null;
        // async function getToken() {
        //     try {
        //         const res = await fetch('/token-api-mp3');
        //         if (!res.ok) throw new Error('Kh√¥ng l·∫•y ƒë∆∞·ª£c token');
        //         const data = await res.json();
        //         tokenData = data;
        //         return tokenData;
        //     } catch (err) {
        //         console.error('L·ªói l·∫•y token:', err);
        //         return null;
        //     }
        // }
        // async function fetchWithAuth(url) {
        //     await getToken();
        //     if (!tokenData) throw new Error('Kh√¥ng c√≥ token x√°c th·ª±c');
        //     const headers = {
        //         'X-Auth-Token': tokenData.token,
        //         'X-Auth-Timestamp': tokenData.timestamp,
        //         'X-Client-Key': tokenData.clientKey,
        //         'X-Auth-Nonce': tokenData.nonce,
        //     };

        //     let res = await fetch(url, {
        //         headers
        //     });

        //     if (!res.ok) {
        //         // N·∫øu response l·ªói, ƒë·ªçc n·ªôi dung l·ªói v√† log
        //         const errorText = await res.text();
        //         console.error(`L·ªói response (${res.status}):`, errorText);
        //         if (res.status === 403) {
        //             await getToken();
        //             if (!tokenData) throw new Error('Kh√¥ng c√≥ token x√°c th·ª±c');
        //             const newHeaders = {
        //                 'X-Auth-Token': tokenData.token,
        //                 'X-Auth-Timestamp': tokenData.timestamp,
        //                 'X-Client-Key': tokenData.clientKey,
        //                 'X-Auth-Nonce': tokenData.nonce,
        //             };

        //             res = await fetch(url, {
        //                 headers: newHeaders
        //             });

        //             if (!res.ok) {
        //                 const errText = await res.text();
        //                 // console.error(`L·ªói sau khi refresh token (${res.status}):`, errText);
        //                 throw new Error(`Request l·ªói sau khi refresh token: ${res.status}`);
        //             }
        //         } else {
        //             throw new Error(`Request l·ªói: ${res.status}`);
        //         }
        //     }

        //     return res;
        // }
        // document.addEventListener('DOMContentLoaded', function() {
        //     const toggleBtn = document.getElementById("toggle-audio");
        //     const audioIcon = document.getElementById("audio-icon");

        //     // Logic l·∫•y nh·∫°c Zing MP3 n·∫øu c·∫ßn
        //     const initializeMusic = async () => {
        //         const musicData = window.dataLove2Loveloom.data;
        //         if (musicData.type_music === 'zing' && musicData.music_id) {
        //             try {
        //                 const res = await fetchWithAuth(`/get-song?id=${musicData.music_id}`);
        //                 if (!res.ok) throw new Error('L·ªói khi l·∫•y th√¥ng tin b√†i h√°t');
        //                 const songInfo = await res.json();

        //                 const mp3Url = songInfo.stream?.['128'];
        //                 if (mp3Url) {
        //                     // C·∫≠p nh·∫≠t l·∫°i link nh·∫°c trong object global
        //                     window.dataLove2Loveloom.data.backgroundMusic = mp3Url;
        //                     document.dispatchEvent(new CustomEvent('zingMusicReady', {
        //                         detail: {
        //                             url: mp3Url
        //                         }
        //                     }));
        //                     console.log('ƒê√£ c·∫≠p nh·∫≠t link nh·∫°c Zing:', mp3Url);
        //                 } else {
        //                     console.error('Kh√¥ng t√¨m th·∫•y link mp3 128kbps t·ª´ Zing.');
        //                 }
        //             } catch (error) {
        //                 console.error('L·ªói khi l·∫•y nh·∫°c t·ª´ Zing:', error);
        //             }
        //         }
        //     };

        //     // Ch·∫°y h√†m l·∫•y nh·∫°c Zing ngay khi c√≥ th·ªÉ
        //     initializeMusic();

        //     // H√†m c·∫≠p nh·∫≠t icon
        //     const updateAudioIcon = () => {
        //         const audio = window.galaxyAudio; // Tham chi·∫øu ƒë·∫øn audio t·ª´ script.js
        //         if (!audio || audio.paused || audio.muted) {
        //             audioIcon.classList.remove("fa-volume-high");
        //             audioIcon.classList.add("fa-volume-xmark");
        //         } else {
        //             audioIcon.classList.remove("fa-volume-xmark");
        //             audioIcon.classList.add("fa-volume-high");
        //         }
        //     };

        //     // X·ª≠ l√Ω s·ª± ki·ªán click v√†o n√∫t toggle
        //     toggleBtn.addEventListener("click", () => {
        //         const audio = window.galaxyAudio;
        //         if (!audio) {
        //             console.warn("Vui l√≤ng b·∫Øt ƒë·∫ßu tr·∫£i nghi·ªám ƒë·ªÉ b·∫≠t/t·∫Øt nh·∫°c.");
        //             return;
        //         }
        //         audio.muted = !audio.muted;
        //         if (audio.paused) {
        //             audio.play();
        //         }
        //         updateAudioIcon();
        //     });

        //     // Li√™n t·ª•c ki·ªÉm tra v√† g·∫Øn listener khi audio ƒë∆∞·ª£c t·∫°o
        //     setInterval(() => {
        //         const audio = window.galaxyAudio;
        //         if (audio && !audio.dataset.listenersAttached) {
        //             audio.addEventListener('play', updateAudioIcon);
        //             audio.addEventListener('pause', updateAudioIcon);
        //             audio.addEventListener('volumechange', updateAudioIcon);
        //             audio.dataset.listenersAttached = 'true'; // ƒê√°nh d·∫•u ƒë√£ g·∫Øn listener
        //             updateAudioIcon();
        //         }
        //     }, 500);
        // });
    </script>
            <script>
            // Ch·∫∑n chu·ªôt ph·∫£i
            document.addEventListener("contextmenu", function(e) {
                e.preventDefault();
            });

            // Ch·∫∑n F12, Ctrl+U, Ctrl+Shift+I/J/C/S, Cmd+Opt+I (Mac)
            document.addEventListener("keydown", function(e) {
                if (
                    e.key === "F12" ||
                    (e.ctrlKey && e.shiftKey && ["i", "j", "c", "s"].includes(e.key.toLowerCase())) ||
                    (e.ctrlKey && e.key.toLowerCase() === "u") ||
                    (e.metaKey && e.altKey && e.key.toLowerCase() === "i") || // Cmd + Opt + I
                    (e.metaKey && e.key.toLowerCase() === "u") // Cmd + U
                ) {
                    e.preventDefault();
                    return false;
                }
            });

            // X√≥a console methods
            console.log = () => {};
            console.debug = () => {};
            console.warn = () => {};
            console.info = () => {};

            // Ph√°t hi·ªán DevTools b·∫±ng th·ªùi gian th·ª±c thi debugger
            setInterval(() => {
                const before = new Date().getTime();
                debugger;
                const after = new Date().getTime();
                if (after - before > 100) {
                    document.body.innerHTML =
                        '<h1 style="text-align:center;margin-top:100px;color:red">üîí B·∫°n ƒëang c·ªë m·ªü Developer Tools!</h1>';
                }
            }, 1000);

            // Ph√°t hi·ªán DevTools qua k√≠ch th∆∞·ªõc c·ª≠a s·ªï
            // function detectDevToolsSize() {
            //     if (
            //         window.outerWidth - window.innerWidth > 160 ||
            //         window.outerHeight - window.innerHeight > 160
            //     ) {
            //         document.body.innerHTML = '<h1 style="text-align:center;margin-top:100px;color:red">üîí Developer Tools b·ªã ph√°t hi·ªán!</h1>';
            //     }
            // }
            // window.onresize = detectDevToolsSize;
            // window.onload = detectDevToolsSize;

            // Ph√°t hi·ªán m·ªü console qua toString tampering
            (function() {
                const element = new Image();
                Object.defineProperty(element, 'id', {
                    get: function() {
                        document.body.innerHTML =
                            '<h1 style="text-align:center;margin-top:100px;color:red">‚ö†Ô∏è ƒê·ª´ng m·ªü console!</h1>';
                        throw new Error("Console is blocked");
                    }
                });

                setInterval(() => {
                    console.log(element);
                    console.clear();
                }, 2000);
            })();

            // NgƒÉn inspect element qua mouse drag
            document.addEventListener('dragstart', function(e) {
                e.preventDefault();
            });

            // NgƒÉn ch·ªçn to√†n b·ªô (Ctrl+A)
            document.addEventListener('keydown', function(e) {
                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'a') {
                    e.preventDefault();
                }
            });
        </script>
    <script defer="" src="./i love you - LoveLoom_files/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon="{&quot;version&quot;:&quot;2024.11.0&quot;,&quot;token&quot;:&quot;dbcd8856a1a842ceb5c3d63534a9f51d&quot;,&quot;r&quot;:1,&quot;server_timing&quot;:{&quot;name&quot;:{&quot;cfCacheStatus&quot;:true,&quot;cfEdge&quot;:true,&quot;cfExtPri&quot;:true,&quot;cfL4&quot;:true,&quot;cfOrigin&quot;:true,&quot;cfSpeedBrain&quot;:true},&quot;location_startswith&quot;:null}}" crossorigin="anonymous"></script>



</body></html>